<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBS Authentic Menu</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@700;900&family=Poppins:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        /* --- STYLE CSS --- */
        :root { --sbs-yellow: #FFD200; --sbs-black: #1A1A1A; --sbs-orange: #FF6600; --sbs-dark-yellow: #FFB800; }
        body { font-family: 'Poppins', sans-serif; margin: 0; padding: 15px; color: var(--sbs-black); background: repeating-linear-gradient(45deg, rgba(0,0,0,0.03) 0px, rgba(0,0,0,0.03) 1px, transparent 1px, transparent 4px), radial-gradient(circle at center, var(--sbs-yellow) 0%, #e6bc00 100%); background-attachment: fixed; overscroll-behavior-y: contain; padding-bottom: 120px; }
        .top-bar { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .logo-container { width: 70px; height: 70px; background: var(--sbs-black); border-radius: 50%; border: 3px solid #fff; display: flex; align-items: center; justify-content: center; overflow: hidden; flex-shrink: 0; }
        .logo-container img { width: 100%; height: auto; }
        .header-title h1 { font-family: 'Bebas Neue', cursive; font-size: 55px; margin: 0; line-height: 0.8; letter-spacing: -1px; transform: skew(-5deg); text-shadow: 4px 4px 0px #fff; }

        /* --- TRACKING STATUS BAR (UPDATED) --- */
        #status-tracker {
            position: fixed; top: 0; left: 0; width: 100%; 
            background: var(--sbs-black); color: #fff; padding: 10px; 
            z-index: 2000; text-align: center; font-size: 14px; 
            font-weight: bold; display: none; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer; /* Menandakan bisa diklik */
        }
        .status-badge { 
            background: var(--sbs-orange); color: #fff; padding: 3px 10px; 
            border-radius: 5px; margin-left: 10px; text-transform: uppercase; 
        }
        
        /* Search & Tabs */
        .search-wrapper { position: relative; margin-bottom: 20px; z-index: 101; }
        .search-box { width: 100%; box-sizing: border-box; background: #fff; border: 3px solid var(--sbs-black); border-radius: 50px; padding: 12px 20px 12px 45px; font-family: 'Montserrat', sans-serif; font-weight: 700; text-transform: uppercase; outline: none; box-shadow: 4px 4px 0px rgba(0,0,0,0.1); }
        .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); width: 18px; opacity: 0.6; }
        .clear-btn { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: #ddd; border: none; width: 20px; height: 20px; border-radius: 50%; display: none; align-items: center; justify-content: center; cursor: pointer; font-weight: bold; font-size: 12px;}
        .tabs { display: flex; overflow-x: auto; gap: 10px; padding: 12px; margin-bottom: 25px; position: sticky; top: 10px; z-index: 100; background: var(--sbs-dark-yellow); border: 3px solid var(--sbs-black); border-radius: 50px; box-shadow: 6px 6px 0px rgba(0,0,0,0.1); scrollbar-width: none; }
        .tabs.hidden-by-search { display: none; }
        .tab-btn { background: #fff; border: 2px solid var(--sbs-black); padding: 8px 20px; border-radius: 50px; font-family: 'Montserrat', sans-serif; font-size: 11px; text-transform: uppercase; white-space: nowrap; cursor: pointer; box-shadow: 3px 3px 0px rgba(0,0,0,0.2); transition: 0.1s; }
        .tab-btn.active { background: var(--sbs-black); color: #fff; transform: translate(2px, 2px); box-shadow: none; }

        /* Content & Cards */
        .content { display: none; grid-template-columns: 1fr; gap: 30px; }
        .content.active { display: grid; animation: fadeIn 0.4s ease-out; }
        .search-mode-active .content { display: grid !important; animation: none; }
        .card-hidden, .section-hidden { display: none !important; }
        
        .menu-card { background: #fff; border: 3px solid var(--sbs-black); border-radius: 25px; overflow: hidden; box-shadow: 10px 10px 0px var(--sbs-black); position: relative; display: flex; flex-direction: column; cursor: pointer; transition: transform 0.1s; }
        .menu-card:active { transform: scale(0.98); }
        .card-img-box { 
            width: 100%; 
            height: auto; 
            aspect-ratio: 1 / 1; 
            position: relative; 
            background: #eee; 
            border-bottom: none; /* UBAH INI (sebelumnya: 3px solid ...) */
        }
        .card-img-box img { width: 100%; height: 100%; object-fit: cover; }
        .best-rec { border-color: var(--sbs-orange); box-shadow: 10px 10px 0px var(--sbs-orange); }

        /* --- STYLE ICON TAP (+) BARU --- */
        .add-badge { 
            /* Tampilkan kembali (override display:none sebelumnya) */
            display: none !important; 
        }
        
        /* ALCS Style */
        .alcs-card { background: #fff; border: 3px solid var(--sbs-black); box-shadow: 8px 8px 0px var(--sbs-black); border-radius: 20px; padding: 20px; margin-bottom: 0; position: relative; }
        .alcs-brand { font-family: 'Montserrat', sans-serif; font-size: 26px; text-transform: uppercase; font-weight: 900; border-bottom: 3px solid #eee; padding-bottom: 8px; margin-bottom: 15px;}
        .alcs-row { display: flex; justify-content: space-between; font-size: 16px; border-bottom: 1px dashed #ddd; padding: 5px 0; cursor: pointer;}
        .alcs-variant { font-weight: 500; }
        .alcs-price-tag { font-family: 'Montserrat', sans-serif; font-weight: 800; }

        /* --- CART FLOATING BAR --- */
        #cart-bar {
            position: fixed; bottom: 20px; left: 20px; right: 20px;
            background: var(--sbs-black); color: #fff;
            padding: 15px 25px; border-radius: 50px;
            display: none; justify-content: space-between; align-items: center;
            box-shadow: 0px 10px 20px rgba(0,0,0,0.5); z-index: 999;
            font-family: 'Montserrat', sans-serif; cursor: pointer; border: 2px solid #fff;
            animation: slideUp 0.3s ease-out;
        }
        .cart-left { display: flex; flex-direction: column; }
        .cart-hint { font-size: 10px; color: var(--sbs-yellow); text-transform: uppercase; font-weight: bold; margin-bottom: -2px; }
        #cart-info { font-weight: bold; font-size: 15px; }
        .cart-right { text-align: right; }
        #cart-total { color: #fff; font-size: 16px; font-weight: 900; }
        .view-btn { font-size: 10px; background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 10px; margin-top: 2px; display: inline-block; }

        /* --- MODAL ORDER & SUCCESS --- */
       /* --- MODAL FIX (SCROLL & POSISI) --- */
        body.noscroll { overflow: hidden; } /* Pengunci Scroll Background */
        
        .modal { 
            display: none; position: fixed; z-index: 9999; 
            left: 0; top: 0; width: 100%; height: 100%; 
            background-color: rgba(0,0,0,0.85); 
            backdrop-filter: blur(3px); /* Efek blur biar fokus */
            align-items: center; justify-content: center; /* Wajib Flexbox biar tengah */
            overscroll-behavior: contain;
        }
        .modal-content { 
            background-color: #fff; width: 90%; max-width: 400px; 
            border-radius: 20px; padding: 25px; 
            border: 4px solid var(--sbs-black); 
            max-height: 85vh; overflow-y: auto; position: relative; 
        }

        /* --- PILIHAN PEMBAYARAN (MODEL TOMBOL) --- */
        .payment-options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 5px; }
        .p-option { cursor: pointer; position: relative; }
        .p-option input { display: none; } /* Sembunyikan radio asli */
        /* UPDATE: Tombol Pembayaran Lebih Kecil */
        .p-label {
            display: flex; flex-direction: row; /* Icon sebelah teks (Horizontal) */
            align-items: center; justify-content: center; gap: 8px;
            padding: 10px; border: 2px solid var(--sbs-black); border-radius: 10px;
            font-weight: bold; font-size: 12px; color: #666; transition: 0.2s;
            text-align: center; height: auto; background: #fff;
        }
        .p-label span { font-size: 18px; margin: 0; display: block; } /* Icon ukurannya pas */
        
        /* Pastikan input HP tidak tertutup */
        #cart-modal .modal-content { padding-bottom: 20px; }
        /* Efek saat dipilih */
        .p-option input:checked + .p-label {
            border-color: var(--sbs-orange);
            background-color: #fff8f0;
            color: var(--sbs-orange);
            box-shadow: 0 4px 10px rgba(255, 102, 0, 0.2);
        }
        
        .cart-item { margin-bottom: 15px; border-bottom: 1px dashed #ddd; padding-bottom: 10px; }
        .item-main { display: flex; justify-content: space-between; font-size: 14px; font-weight: bold; }
        .item-note-input { width: 100%; border: 1px solid #ddd; border-radius: 8px; padding: 8px; margin-top: 8px; font-size: 12px; font-family: 'Poppins'; outline: none; box-sizing: border-box; }
        .item-note-input:focus { border-color: var(--sbs-orange); background: #fffdf9; }
        
        .cart-actions button { background: #ddd; border: none; padding: 2px 8px; border-radius: 5px; font-weight: bold; cursor: pointer; margin-left: 5px;}
        
        .total-row { display: flex; justify-content: space-between; margin-top: 20px; font-weight: bold; font-size: 18px; border-top: 2px solid var(--sbs-black); padding-top: 10px; }
        
        /* NEW FORM STYLES */
        .input-group { margin-top: 15px; }
        .input-group label { display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #666; }
        .input-group input, .input-group select { width: 100%; padding: 10px; border: 2px solid var(--sbs-black); border-radius: 10px; box-sizing: border-box; font-family: 'Poppins'; font-size: 14px; background: #fff; }
        .input-group input:focus, .input-group select:focus { border-color: var(--sbs-orange); outline: none; background: #fffdf9; }
        
        .btn-order { background: var(--sbs-orange); color: #fff; border: 3px solid var(--sbs-black); width: 100%; padding: 12px; border-radius: 10px; font-weight: bold; margin-top: 20px; cursor: pointer; font-size: 16px; }
        .close-modal { position: absolute; top: 15px; right: 20px; font-size: 24px; cursor: pointer; font-weight: bold; }

        /* Success Message */
        #success-modal .modal-content { text-align: center; border-color: #28a745; }
        .success-icon { font-size: 60px; color: #28a745; margin-bottom: 15px; }
        .success-msg { font-size: 16px; line-height: 1.6; color: #444; margin-bottom: 20px; }
        .btn-close-final { background: var(--sbs-black); color: #fff; padding: 12px 30px; border-radius: 50px; border: none; font-weight: bold; cursor: pointer; width: 100%; }

        /* --- HISTORY MODAL (NEW) --- */
        .history-card { border: 2px solid #eee; border-radius: 10px; padding: 10px; margin-bottom: 10px; background: #f9f9f9; }
        .history-header { display: flex; justify-content: space-between; font-size: 12px; font-weight: bold; color: #666; margin-bottom: 5px; }
        .history-status { font-size: 14px; font-weight: 900; color: var(--sbs-black); text-transform: uppercase; }
        .history-items { font-size: 13px; margin-top: 5px; border-top: 1px dashed #ddd; padding-top: 5px; }

        /* TAMBAHAN STYLE UNTUK RIWAYAT DETAIL */
.history-details { 
    margin-top: 8px; 
    border-top: 1px dashed #ccc; 
    padding-top: 8px; 
}
.h-row { 
    display: flex; 
    justify-content: space-between; 
    font-size: 12px; 
    margin-bottom: 4px; 
    color: #444; 
    font-family: 'Poppins', sans-serif;
}
.h-qty { font-weight: bold; margin-right: 5px; color: var(--sbs-black); }
.h-total-row { 
    display: flex; 
    justify-content: space-between; 
    margin-top: 8px; 
    padding-top: 8px; 
    border-top: 2px solid #eee; 
    font-weight: 900; 
    font-size: 14px; 
    color: var(--sbs-black); 
}
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(100px); } to { transform: translateY(0); } }

        /* --- UI BARU: FLOATING BUTTONS (REVISI) --- */
/* Sembunyikan elemen lama */
#status-tracker, #cart-bar { display: none !important; }

        /* POSISI TOMBOL FLOATING (KANAN BAWAH) */
        .floating-container {
            position: fixed;          /* Mengunci posisi di layar */
            bottom: 30px;             /* Jarak dari bawah */
            right: 25px;              /* Jarak dari kanan (tidak mepet) */
            top: auto;                /* Reset posisi top */
            z-index: 999;             /* Pastikan di atas elemen lain */
            display: flex; 
            flex-direction: column-reverse; /* Tombol Keranjang (paling penting) ditaruh paling bawah */
            gap: 15px;                /* Jarak antar tombol */
            align-items: center;
        }

        /* Base Button */
        .fab-btn {
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            cursor: pointer; position: relative;
            transition: transform 0.1s;
            border: 2px solid var(--sbs-black);
        }
        .fab-btn:active { transform: scale(0.90); }

        /* 1. KERANJANG (POSISI ATAS - UTAMA) */
        .fab-cart { 
            width: 48px; height: 48px; /* Diperbesar dari 42px menjadi 48px (+15%) */
            background: var(--sbs-yellow);
            order: 1; 
            z-index: 2;
        }
        .fab-cart.has-items { background: var(--sbs-orange); border-color: #fff; }
        .fab-cart svg { width: 20px; height: 20px; fill: var(--sbs-black); }
        .fab-cart.has-items svg { fill: #fff; }

        /* 2. RIWAYAT (POSISI BAWAH - MINI) */
        .fab-history { 
            width: 37px; height: 37px; /* Diperbesar dari 32px menjadi 37px (+15%) */
            background: #fff; 
            display: none; 
            order: 2; 
            border-width: 1px;
        }
        .fab-history svg { width: 16px; height: 16px; fill: #555; }
        
        .fab-history.active-order { background: #2ecc71; border-color: #fff; }
        .fab-history.active-order svg { fill: #fff; }

        /* Badge Counter */
        .fab-badge {
            position: absolute; top: -5px; right: -5px;
            background-color: #ff0000 !important; color: #fff !important;
            font-size: 10px; font-weight: 900;
            min-width: 16px; height: 16px; padding: 2px;
            border-radius: 50%; border: 2px solid #fff;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; transform: scale(0); transition: 0.2s;
        }
        .fab-badge.show { opacity: 1; transform: scale(1); }

        /* FIX SCROLL LOCK */
        body.noscroll { overflow: hidden !important; height: 100vh; }

/* --- PENTING: PERBAIKAN POPUP (MODAL) --- */
/* Ini memaksa popup muncul DI DEPAN tombol floating */
.modal { 
    z-index: 9999 !important; 
    backdrop-filter: blur(2px); /* Efek blur di belakang popup agar fokus */
}

/* Style tambahan riwayat */
.history-section-title {
    font-size: 14px; font-weight: 900; color: var(--sbs-black);
    margin: 15px 0 10px 0; border-bottom: 2px solid var(--sbs-yellow);
    display: inline-block; padding-bottom: 2px;
}
.btn-clear-history {
    background: transparent; color: #888; border: 1px solid #ccc;
    font-size: 11px; padding: 5px 10px; border-radius: 20px;
    cursor: pointer; margin-top: 10px; width: 100%;
}
        
    </style>
</head>
<body>

    <div class="floating-container">
    <div id="fab-cart" class="fab-btn fab-cart" onclick="openCart()">
        <svg viewBox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h11v-2H7l1.1-2h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
        <div id="badge-cart" class="fab-badge">0</div>
    </div>

    <div id="fab-history" class="fab-btn fab-history" onclick="openHistory()">
        <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
        <div id="badge-history" class="fab-badge">0</div>
    </div>
</div>

<div id="status-tracker" onclick="openHistory()">
    <span id="tracker-summary">Pesananmu Sedang Diproses</span> 
    <span class="status-badge" style="font-size:10px;">LIHAT DETAIL ></span>
</div>

<div class="top-bar">
    <div class="logo-container"><img src="img/sbslogo.jpg" alt="SBS Logo"></div>
    <div class="header-title"><h1>OUR MENU</h1></div>
</div>

<div class="search-wrapper">
    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
    <input type="text" id="menuSearch" class="search-box" placeholder="Cari menu..." autocomplete="off">
    <button id="clearSearch" class="clear-btn" onclick="clearSearchInput()">âœ•</button>
</div>

<div class="tabs" id="menuTabs">
    <button class="tab-btn active" onclick="openT(event, 'makan')">Makan Berat</button>
    <button class="tab-btn" onclick="openT(event, 'cemil')">Cemal-Cemil</button>
    <button class="tab-btn" onclick="openT(event, 'black')">Black</button>
    <button class="tab-btn" onclick="openT(event, 'white')">White</button>
    <button class="tab-btn" onclick="openT(event, 'comfy')">Comfy</button>
    <button class="tab-btn" onclick="openT(event, 'refresh')">Refreshing</button>
    <button class="tab-btn" onclick="openT(event, 'alcs')">Alcs</button>
</div>

<div id="swipe-area">
    <div id="no-results" style="display:none; text-align:center; opacity:0.5; margin-top:50px; font-weight:bold;">MENU TIDAK DITEMUKAN</div>

    <div id="makan" class="content active">
        <div class="menu-card" onclick="addToCart('Kalter', 20000)" data-name="Kalter" data-price="20000" data-tags="nasi tahu telor rice tofu egg telur vegetarian kalter">
            <div class="card-img-box"><img src="img/kalter.webp" alt="Kalter"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Obama', 25000)" data-name="Obama" data-price="25000" data-tags="nasi ayam geprek sambal matah rice chicken pedas spicy hot chili obama">
            <div class="card-img-box"><img src="img/obama.webp" alt="Obama"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card best-rec" onclick="addToCart('Mangku Koe', 28000)" data-name="Mangku Koe" data-price="28000" data-tags="nasi chicken katsu kari rice ayam curry japanese food mangku koe">
            <div class="card-img-box"><img src="img/mangkukoe.webp" alt="Mangku Koe"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card best-rec" onclick="addToCart('Mangku Ayang', 25000)" data-name="Mangku Ayang" data-price="25000" data-tags="nasi ayam siram rice chicken gravy sauce mangku ayang">
            <div class="card-img-box"><img src="img/mangkuayang.webp" alt="Mangku Ayang"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card best-rec" onclick="addToCart('Barudak', 20000)" data-name="Barudak" data-price="20000" data-tags="bakmie katsu sambal matah mie noodle noodles ayam chicken pedas spicy hot barudak">
            <div class="card-img-box"><img src="img/barudak.webp" alt="Barudak"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Sekena Gomes', 22000)" data-name="Sekena Gomes" data-price="22000" data-tags="nasgor merah katsu sambal matah nasi goreng fried rice red ayam chicken pedas spicy hot sekena gomes">
            <div class="card-img-box"><img src="img/sekenagomes.webp" alt="Sekena Gomes"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Sekena Goput', 22000)" data-name="Sekena Goput" data-price="22000" data-tags="nasgor putih katsu sambal matah nasi goreng fried rice white ayam chicken pedas spicy hot sekena goput">
            <div class="card-img-box"><img src="img/sekenagoput.webp" alt="Sekena Goput"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card best-rec" onclick="addToCart('Sekena Keren', 25000)" data-name="Sekena Keren" data-price="25000" data-tags="nasgor kari katsu sambal matah nasi goreng fried rice curry ayam chicken pedas spicy hot sekena keren">
            <div class="card-img-box"><img src="img/sekenakeren.webp" alt="Sekena Keren"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
    </div>

    <div id="cemil" class="content">
        <div class="menu-card best-rec" onclick="addToCart('Paket Sambat', 35000)" data-name="Paket Sambat" data-price="35000" data-tags="aneka camilan snack platter sosis sausage kentang fries gorengan paket sambat">
            <div class="card-img-box"><img src="img/paketsambat.webp" alt="Paket Sambat"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Cricket', 25000)" data-name="Cricket" data-price="25000" data-tags="chicken fillet lava ayam boneless pedas spicy hot snack cricket">
            <div class="card-img-box"><img src="img/cricket.webp" alt="Cricket"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Potato Freak', 17000)" data-name="Potato Freak" data-price="17000" data-tags="french fries kentang goreng potato chips asin salty snack potato freak">
            <div class="card-img-box"><img src="img/potatofreak.webp" alt="Potato Freak"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Uhat Lawik', 17000)" data-name="Uhat Lawik" data-price="17000" data-tags="tahu walik tofu aci goreng crispy snack uhat lawik">
            <div class="card-img-box"><img src="img/uhatlawik.webp" alt="Uhat Lawik"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Gyozable', 18000)" data-name="Gyozable" data-price="18000" data-tags="gyoza dimsum dumpling ayam chicken kukus steam goreng fried gyozable">
            <div class="card-img-box"><img src="img/gyozable.webp" alt="Gyozable"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card best-rec" onclick="addToCart('Tahu Julit', 19000)" data-name="Tahu Julit" data-price="19000" data-tags="tahu cabe garam tofu chili salt pedas spicy hot asin snack tahu julit">
            <div class="card-img-box"><img src="img/tahujulit.webp" alt="Tahu Julit"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
    </div>

    <div id="black" class="content">
        <div class="menu-card best-rec" onclick="addToCart('Fressa', 25000)" data-name="Fressa" data-price="25000" data-tags="berry soda coffee kopi buah segar fizz fressa">
            <div class="card-img-box"><img src="img/fressa.webp" alt="Fressa"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Americano', 16000)" data-name="Americano" data-price="16000" data-tags="americano kopi hitam black coffee pahit bitter no sugar">
            <div class="card-img-box"><img src="img/americano.webp" alt="Americano"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card best-rec" onclick="addToCart('Dark Freshly', 19000)" data-name="Dark Freshly" data-price="19000" data-tags="americano lemon kopi coffee citrus segar fresh dark freshly">
            <div class="card-img-box"><img src="img/darkfreshly.webp" alt="Dark Freshly"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Darkberry', 19000)" data-name="Darkberry" data-price="19000" data-tags="americano berry kopi coffee strawberry fruity darkberry">
            <div class="card-img-box"><img src="img/darkberry.webp" alt="Darkberry"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Tubruk Syari', 13000)" data-name="Tubruk Syari" data-price="13000" data-tags="kopi tubruk traditional black coffee ampas tubruk syari">
            <div class="card-img-box"><img src="img/tubruksyari.webp" alt="Tubruk Syari"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Hanoi Tears', 15000)" data-name="Hanoi Tears" data-price="15000" data-tags="vietnam drip kopi susu milk condensed manis sweet hanoi tears">
            <div class="card-img-box"><img src="img/hanoitears.webp" alt="Hanoi Tears"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
    </div>

    <div id="white" class="content">
        <div class="menu-card best-rec" onclick="addToCart('Penkopi', 23000)" data-name="Penkopi" data-price="23000" data-tags="creamy coffee kopi susu milk latte palm sugar gula aren penkopi">
            <div class="card-img-box"><img src="img/penkopi.webp" alt="Penkopi"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Macch Favorito', 20000)" data-name="Macch Favorito" data-price="20000" data-tags="caramel macchiato kopi coffee susu milk karamel manis sweet macch favorito">
            <div class="card-img-box"><img src="img/macchfavorito.webp" alt="Macch Favorito"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Specta', 25000)" data-name="Specta" data-price="25000" data-tags="peanut coffee kopi kacang skippy jam susu milk specta">
            <div class="card-img-box"><img src="img/specta.webp" alt="Specta"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Comica', 22000)" data-name="Comica" data-price="22000" data-tags="hazelnut coffee kopi susu milk kacang wangi comica">
            <div class="card-img-box"><img src="img/comica.webp" alt="Comica"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Rhumpee', 20000)" data-name="Rhumpee" data-price="20000" data-tags="rhum coffee rum non alkohol kopi susu milk wangi rhumpee">
            <div class="card-img-box"><img src="img/rhumpee.webp" alt="Rhumpee"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Crush', 22000)" data-name="Crush" data-price="22000" data-tags="rhum regal coffee rum biskuit biscuit marie susu milk crush">
            <div class="card-img-box"><img src="img/crush.webp" alt="Crush"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
    </div>

    <div id="comfy" class="content">
        <div class="menu-card best-rec" onclick="addToCart('Mammy', 18000)" data-name="Mammy" data-price="18000" data-tags="matcha latte green tea teh hijau susu milk japanese mammy">
            <div class="card-img-box"><img src="img/mammy.webp" alt="Mammy"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Deep Choc', 18000)" data-name="Deep Choc" data-price="18000" data-tags="chocolate coklat cocoa susu milk manis sweet deep choc">
            <div class="card-img-box"><img src="img/deepchoc.webp" alt="Deep Choc"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Schopea', 25000)" data-name="Schopea" data-price="25000" data-tags="peanut chocolate coklat kacang susu milk schopea">
            <div class="card-img-box"><img src="img/schopea.webp" alt="Schopea"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Creamberry', 23000)" data-name="Creamberry" data-price="23000" data-tags="berry latte strawberry susu milk fruity creamberry">
            <div class="card-img-box"><img src="img/creamberry.webp" alt="Creamberry"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Jandu', 18000)" data-name="Jandu" data-price="18000" data-tags="jahe madu ginger honey hangat warm herbal wedang jandu">
            <div class="card-img-box"><img src="img/jandu.webp" alt="Jandu"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
    </div>

    <div id="refresh" class="content">
        <div class="menu-card" onclick="addToCart('Threepi', 15000)" data-name="Threepi" data-price="15000" data-tags="tropical tea teh buah fruit segar fresh threepi">
            <div class="card-img-box"><img src="img/threepi.webp" alt="Threepi"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Teh Gelies', 10000)" data-name="Teh Gelies" data-price="10000" data-tags="jasmine tea teh melati manis sweet es ice teh gelies">
            <div class="card-img-box"><img src="img/tehgelies.webp" alt="Teh Gelies"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card best-rec" onclick="addToCart('Red Bloom', 18000)" data-name="Red Bloom" data-price="18000" data-tags="yakult berry yogurt strawberry probiotik asam manis sour sweet red bloom">
            <div class="card-img-box"><img src="img/redbloom.webp" alt="Red Bloom"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Yagustea', 15000)" data-name="Yagustea" data-price="15000" data-tags="yakult sugus grape anggur permen candy ungu purple yagustea">
            <div class="card-img-box"><img src="img/yagustea.webp" alt="Yagustea"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Chenteal', 15000)" data-name="Chenteal" data-price="15000" data-tags="yakult lychee tea leci teh fruit chenteal">
            <div class="card-img-box"><img src="img/chenteal.webp" alt="Chenteal"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Trustey', 18000)" data-name="Trustey" data-price="18000" data-tags="honey yuzu madu jeruk citrus orange lemon segar trustey">
            <div class="card-img-box"><img src="img/trustey.webp" alt="Trustey"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Rindu', 15000)" data-name="Rindu" data-price="15000" data-tags="winter melon kundur buah manis segar rindu">
            <div class="card-img-box"><img src="img/rindu.webp" alt="Rindu"></div>
            <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
        <div class="menu-card" onclick="addToCart('Literally Water', 5000)" data-name="Literally Water" data-price="5000" data-tags="air mineral water bening tawar literally water">
             <div class="card-img-box"><img src="img/literallywater.webp" alt="Literally Water"></div>
             <div class="add-badge"><svg viewBox="0 0 24 24"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"/></svg></div>
        </div>
    </div>

    <div id="alcs" class="content">
        <div class="alcs-card" data-tags="bintang beer bir pilsener alkohol alcohol">
            <div class="alcs-brand">BINTANG</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Bintang Small', 32000)"><span class="alcs-variant">Small</span><span class="alcs-price-tag">32K</span></div>
                <div class="alcs-row" onclick="addToCart('Bintang Radler', 32000)"><span class="alcs-variant">Radler</span><span class="alcs-price-tag">32K</span></div>
                <div class="alcs-row" onclick="addToCart('Bintang Large', 50000)"><span class="alcs-variant">Large</span><span class="alcs-price-tag">50K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="anker beer bir lychee leci pineapple nanas alkohol alcohol">
            <div class="alcs-brand">ANKER</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Anker Lychee', 29000)"><span class="alcs-variant">Lychee</span><span class="alcs-price-tag">29K</span></div>
                <div class="alcs-row" onclick="addToCart('Anker Pineapple', 29000)"><span class="alcs-variant">Pineapple</span><span class="alcs-price-tag">29K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="smirnoff vodka raspberry berry green apple apel hijau lemon lychee leci pink lemonade alkohol alcohol">
            <div class="alcs-brand">SMIRNOFF</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Smirnoff Raspberry', 33000)"><span class="alcs-variant">Raspberry</span><span class="alcs-price-tag">33K</span></div>
                <div class="alcs-row" onclick="addToCart('Smirnoff Green Apple', 33000)"><span class="alcs-variant">Green Apple</span><span class="alcs-price-tag">33K</span></div>
                <div class="alcs-row" onclick="addToCart('Smirnoff Lemon Lyc', 33000)"><span class="alcs-variant">Lemon Lychee</span><span class="alcs-price-tag">33K</span></div>
                <div class="alcs-row" onclick="addToCart('Smirnoff Pink Lem', 33000)"><span class="alcs-variant">Pink Lemonade</span><span class="alcs-price-tag">33K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="mix max vodka anggur merah red grape exotic blue biru alkohol alcohol">
            <div class="alcs-brand">MIX MAX</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Mix Max Anggur', 34000)"><span class="alcs-variant">Anggur Merah</span><span class="alcs-price-tag">34K</span></div>
                <div class="alcs-row" onclick="addToCart('Mix Max Blue', 34000)"><span class="alcs-variant">Exotic Blue</span><span class="alcs-price-tag">34K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="iceland vodka lychee leci long island alkohol alcohol">
            <div class="alcs-brand">ICELAND</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Iceland Lychee', 34000)"><span class="alcs-variant">Lychee</span><span class="alcs-price-tag">34K</span></div>
                <div class="alcs-row" onclick="addToCart('Iceland L. Island', 34000)"><span class="alcs-variant">Long Island</span><span class="alcs-price-tag">34K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="api anggur hijau green grape kawa kawi arak bali alkohol alcohol">
            <div class="alcs-brand">API</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Api Anggur Hijau', 106000)"><span class="alcs-variant">Anggur Hijau</span><span class="alcs-price-tag">106K</span></div>
            </div>
        </div>
    </div>
</div>

<div id="cart-bar" onclick="openCart()">
    <div class="cart-left">
        <span class="cart-hint">Pesanan Kamu</span>
        <span id="cart-info">0 ITEM</span>
    </div>
    <div class="cart-right">
        <span id="cart-total">Rp 0</span><br>
        <span class="view-btn">Lihat Detail &gt;</span>
    </div>
</div>

<div id="cart-modal" class="modal">
    <div class="modal-content">
        <div class="close-modal" onclick="closeCart()">&times;</div>
        <div class="modal-header">PESANANMU</div>
        <div id="cart-items-container"></div>
        
        <div class="total-row">
            <span>TOTAL</span>
            <span id="modal-total">Rp 0</span>
        </div>
        
        <div class="input-group">
            <label>Nomor Meja*</label>
            <input type="number" id="table-number" placeholder="Scan QR Meja..." required inputmode="numeric">
        </div>
        <div class="input-group">
            <label>Nama Kakak*</label>
            <input type="text" id="customer-real-name" placeholder="Siapa nama kakak?" required>
        </div>
        
        <div class="input-group">
            <label>Metode Pembayaran*</label>
            <div class="payment-options">
                <label class="p-option">
                    <input type="radio" name="payment_method" value="tunai" checked>
                    <div class="p-label">
                        <span>ðŸ’µ</span> TUNAI (Kasir)
                    </div>
                </label>
                <label class="p-option">
                    <input type="radio" name="payment_method" value="qris">
                    <div class="p-label">
                        <span>ðŸ“±</span> QRIS / E-Wallet
                    </div>
                </label>
            </div>
        </div>
        
        <div class="input-group">
            <label>Nomor HP / WA (Opsional)</label>
            <input type="tel" id="customer-phone" placeholder="08xxxxxxxxxx" inputmode="tel">
        </div>

        <button class="btn-order" onclick="submitOrder()">KIRIM KE DAPUR</button>
    </div>
</div>

<div id="success-modal" class="modal">
    <div class="modal-content">
        <div class="success-icon">âœ”</div>
        <div class="modal-header" style="border:none; margin-bottom:5px; text-align:center;">BERHASIL!</div>
        <div class="success-msg">
            Pesanan Kakak sudah kami terima.<br>
            <b>Mohon segera selesaikan pembayaran</b> agar pesanan bisa diproses.
        </div>
        <button class="btn-close-final" onclick="closeSuccess()">OK, MENGERTI</button>
    </div>
</div>

<div id="history-modal" class="modal">
    <div class="modal-content">
        <div class="close-modal" onclick="closeHistory()">&times;</div>
        <div class="modal-header">RIWAYAT PESANAN</div>
        <div id="history-container" style="padding-bottom:10px;">
            </div>
        <button class="btn-close-final" onclick="closeHistory()">TUTUP</button>
    </div>
</div>
<div id="clear-history-modal" class="modal">
    <div class="modal-content" style="text-align:center;">
        <div class="success-icon" style="color:red; font-size:50px; margin-bottom:10px;">ðŸ—‘</div>
        <div class="modal-header" style="border:none; margin-bottom:10px; text-align:center; color:#1A1A1A;">HAPUS RIWAYAT?</div>
        <div class="success-msg" style="margin-bottom:20px; font-size:14px; color:#555;">
            Semua riwayat pesanan yang <b>SUDAH SELESAI</b> akan dihapus permanen dari memori HP ini.
        </div>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-top:10px;">
            <button onclick="closeClearHistoryModal()" 
                    style="background:#eee; color:#333; border:none; padding:12px; border-radius:10px; font-weight:bold; cursor:pointer;">
                BATAL
            </button>
            <button onclick="executeClearHistory()" 
                    style="background:red; color:#fff; border:none; padding:12px; border-radius:10px; font-weight:bold; cursor:pointer;">
                YA, HAPUS
            </button>
        </div>
    </div>
</div>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

<script>
    // --- KONFIGURASI FIREBASE ---
    const firebaseConfig = {
        apiKey: "AIzaSyBSp5184dVTy-EER2qOfxeEA9KQOCMFpKo",
        authDomain: "sbs-menu-d1611.firebaseapp.com",
        databaseURL: "https://sbs-menu-d1611-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "sbs-menu-d1611",
        storageBucket: "sbs-menu-d1611.firebasestorage.app",
        messagingSenderId: "530098727952",
        appId: "1:530098727952:web:1bb3072d93be9564fbee95"
    };

    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.database();

    // --- LOGIC CART ---
    let cart = JSON.parse(localStorage.getItem('sbs_cart')) || [];

    // FUNGSI CEK URL (?table=5)
    function getTableFromURL() {
        const params = new URLSearchParams(window.location.search);
        return params.get('table');
    }

    // SAAT PAGE LOAD
    window.onload = function() {
        const tableFromURL = getTableFromURL();
        const tableInput = document.getElementById('table-number');
        
        if (tableFromURL) {
            tableInput.value = tableFromURL;
            tableInput.readOnly = true;
            tableInput.style.backgroundColor = "#eee"; 
            tableInput.placeholder = "Meja " + tableFromURL;
        } else {
            tableInput.readOnly = false;
            tableInput.style.backgroundColor = "#fff";
            tableInput.placeholder = "Ketik Nomor Meja...";
        }

        // AUTO-RESTORE QRIS POPUP (Anti-Refresh Loss)
        checkPendingQRIS();
        updateCartUI();
        trackOrders();
    };

    function addToCart(name, price) {
        const existingItem = cart.find(item => item.name === name);
        if (existingItem) {
            existingItem.qty++;
        } else {
            cart.push({ name: name, price: price, qty: 1, note: '' });
        }
        updateCartUI();
        localStorage.setItem('sbs_cart', JSON.stringify(cart)); // SIMPAN KE MEMORI
        if (navigator.vibrate) navigator.vibrate(50);
    }

    // --- 1. UPDATE LOGIC KERANJANG (FLOATING) ---
    function updateCartUI() {
        let totalQty = 0;
        cart.forEach(item => totalQty += item.qty);

        const fabCart = document.getElementById('fab-cart');
        const badgeCart = document.getElementById('badge-cart');

        if (totalQty > 0) {
            fabCart.classList.add('has-items');
            badgeCart.innerText = totalQty;
            badgeCart.classList.add('show');
            // Efek getar HP saat nambah item
            if (navigator.vibrate) navigator.vibrate(50); 
        } else {
            fabCart.classList.remove('has-items');
            badgeCart.classList.remove('show');
        }
    }

    // --- FUNGSI MEMBUKA & RENDER KERANJANG (YANG HILANG) ---
    // --- FUNGSI MEMBUKA & RENDER KERANJANG (FIXED) ---
    function openCart() {
        renderCart();
        document.getElementById('cart-modal').style.display = 'flex'; // Pakai Flex biar centering jalan
        document.body.classList.add('noscroll'); // KUNCI SCROLL BACKGROUND
    }

    function closeCart() {
        document.getElementById('cart-modal').style.display = 'none';
        document.body.classList.remove('noscroll'); // BUKA KUNCI SCROLL
    }

    function renderCart() {
        const container = document.getElementById('cart-items-container');
        container.innerHTML = '';
        let total = 0;

        if (cart.length === 0) {
            container.innerHTML = '<div style="text-align:center; color:#888; padding:20px;">Keranjang Masih Kosong</div>';
            document.getElementById('modal-total').innerText = 'Rp 0';
            return;
        }

        cart.forEach((item, index) => {
            total += item.price * item.qty;
            
            // LOGIKA DETAIL HARGA (Hanya muncul jika qty > 1)
            let priceDetail = '';
            if (item.qty > 1) {
                priceDetail = `<div style="font-size:11px; color:#888; margin-top:2px; font-weight:normal;">(${item.qty} x Rp ${item.price.toLocaleString('id-ID')})</div>`;
            }

            container.innerHTML += `
                <div class="cart-item">
                    <div class="item-main">
                        <div>
                            <span>${item.qty}x ${item.name}</span>
                            ${priceDetail} </div>
                        <span>Rp ${(item.price * item.qty).toLocaleString('id-ID')}</span>
                    </div>
                    <input type="text" class="item-note-input" placeholder="Catatan (cth: Pedas, Tanpa Es)..." 
                           value="${item.note || ''}" onchange="updateItemNote(${index}, this.value)">
                    <div class="cart-actions" style="text-align:right; margin-top:5px;">
                        <button onclick="changeQty(${index}, -1)" style="background:#ddd; width:30px; border:none; border-radius:5px;">-</button>
                        <button onclick="changeQty(${index}, 1)" style="background:#FFD200; width:30px; border:none; border-radius:5px;">+</button>
                    </div>
                </div>`;
        });
        document.getElementById('modal-total').innerText = 'Rp ' + total.toLocaleString('id-ID');
    }

    function changeQty(index, delta) {
        cart[index].qty += delta;
        if (cart[index].qty <= 0) {
            cart.splice(index, 1);
        }
        updateCartUI();
        renderCart();
        localStorage.setItem('sbs_cart', JSON.stringify(cart)); // SIMPAN KE MEMORI
        if (cart.length === 0) closeCart();
    }
  /*  function changeQty(index, delta) {
        cart[index].qty += delta;
        if (cart[index].qty <= 0) {
            cart.splice(index, 1); // Hapus jika 0
        }
        updateCartUI(); // Update badge merah
        renderCart();   // Update tampilan modal
        if (cart.length === 0) closeCart(); // Tutup jika kosong
    } */

    function updateItemNote(index, value) {
        cart[index].note = value;
    }
    
    // --- FUNGSI KIRIM PESANAN ---
    function submitOrder() {
        const tableNum = document.getElementById('table-number').value;
        const custName = document.getElementById('customer-real-name').value;
        const custPhone = document.getElementById('customer-phone').value;
        
        // Ambil nilai dari Radio Button yang terpilih (Bukan ID dropdown lagi)
        const paymentRadio = document.querySelector('input[name="payment_method"]:checked');
        const paymentMethod = paymentRadio ? paymentRadio.value : 'tunai';

        if (!tableNum) { alert("Mohon isi Nomor Meja!"); return; }
        if (!custName) { alert("Mohon isi Nama Kakak!"); return; }
        if (cart.length === 0) return;

        let totalPrice = 0;
        cart.forEach(item => totalPrice += (item.price * item.qty));

        // LOGIKA STATUS: 
        // Tunai -> 'new'
        // QRIS -> 'qris_unpaid' (Belum boleh diproses dapur)
        let initialStatus = (paymentMethod === 'tunai') ? 'new' : 'qris_unpaid';

        const orderData = {
            tableNumber: tableNum,
            customerName: custName,
            customerPhone: custPhone,
            paymentMethod: paymentMethod,
            items: cart,
            total: totalPrice,
            timestamp: new Date().toISOString(),
            status: initialStatus,
            clientPaidAt: null // Placeholder untuk KPI
        };

        const newOrderRef = db.ref().child('orders').push();
        newOrderRef.set(orderData)
        .then(() => {
            saveOrderToHistory(newOrderRef.key);
            
            // Simpan state QRIS ke LocalStorage untuk auto-restore
            if(paymentMethod === 'qris') {
                localStorage.setItem('sbs_pending_qris', JSON.stringify({
                    id: newOrderRef.key,
                    amount: totalPrice
                }));
            }
            
            cart = []; 
            localStorage.removeItem('sbs_cart');
            updateCartUI();
            closeCart();
            
            if(!document.getElementById('table-number').readOnly) {
                document.getElementById('table-number').value = '';
            }
            document.getElementById('customer-real-name').value = '';
            
            if(paymentMethod === 'qris') {
                showQRISModal(totalPrice, newOrderRef.key);
            } else {
                showSuccessModal();
            }
        })
        .catch((error) => {
            alert("Gagal mengirim: " + error.message);
        });
    }

    // --- MANAJEMEN QRIS & AUTO RESTORE ---
    function checkPendingQRIS() {
        const pending = JSON.parse(localStorage.getItem('sbs_pending_qris'));
        if (pending) {
            // Cek status ke DB, jangan sampai pop up kalau sudah dibayar/ditolak
            db.ref('orders/' + pending.id).once('value').then(snapshot => {
                const data = snapshot.val();
                if (data && data.status === 'qris_unpaid') {
                    showQRISModal(pending.amount, pending.id);
                } else {
                    localStorage.removeItem('sbs_pending_qris');
                }
            });
        }
    }

    function showQRISModal(amount, orderId) {
        const modal = document.getElementById('success-modal');
        modal.querySelector('.modal-content').innerHTML = `
            <div class="modal-header" style="border:none; text-align:center; font-size:24px;">SCAN QRIS</div>
            <div style="text-align:center; margin-bottom:15px;">
                <img src="https://upload.wikimedia.org/wikipedia/commons/d/d0/QR_code_for_mobile_English_Wikipedia.svg" 
                     alt="QRIS Code" style="width:200px; height:200px; border:2px solid #000; padding:5px;">
                <br>
                <div style="font-weight:bold; font-size:18px; margin-top:10px;">Rp ${amount.toLocaleString('id-ID')}</div>
            </div>
            <div class="success-msg" style="font-size:12px;">
                1. Scan QR di atas.<br>
                2. Tekan tombol di bawah <b>SETELAH</b> transfer berhasil.<br>
                3. Pesanan baru akan masuk ke Dapur setelah konfirmasi.
            </div>
            <button class="btn-close-final" onclick="confirmQRISPayment('${orderId}')">SAYA SUDAH BAYAR</button>
        `;
        modal.style.display = 'flex';
    }

    function confirmQRISPayment(orderId) {
        // Update status ke pending_payment
        db.ref('orders/' + orderId).update({
            status: 'pending_payment',
            clientPaidAt: new Date().toISOString()
        }).then(() => {
            localStorage.removeItem('sbs_pending_qris');
            
            // GANTI ALERT DENGAN MODAL CANTIK
            // Kita pinjam modal success yang sudah ada, tapi ubah teksnya
            const modal = document.getElementById('success-modal');
            modal.querySelector('.modal-content').innerHTML = `
                <div class="success-icon">â³</div>
                <div class="modal-header" style="border:none; margin-bottom:5px; text-align:center;">PEMBAYARAN DITERIMA</div>
                <div class="success-msg">
                    Terima kasih! Bukti bayar sudah masuk.<br>
                    Dapur sedang memverifikasi pesananmu.
                </div>
                <button class="btn-close-final" onclick="closeSuccess()">OK, MENGERTI</button>
            `;
            // Paksa modal tampil
            modal.style.display = 'flex'; 

        }).catch(err => {
            alert("Error: " + err.message); // Kalau error teknis biarkan alert
        });
    }
    function showSuccessModal() {
        const modal = document.getElementById('success-modal');
        modal.querySelector('.modal-content').innerHTML = `
            <div class="success-icon">âœ”</div>
            <div class="modal-header" style="border:none; margin-bottom:5px; text-align:center;">PESANAN DITERIMA!</div>
            <div class="success-msg">
                Mohon lakukan pembayaran di <b>KASIR</b><br>
                agar pesanan segera diproses.
            </div>
            <button class="btn-close-final" onclick="closeSuccess()">OK, MENGERTI</button>
        `;
        modal.style.display = 'flex';
    }

    function closeSuccess() {
        document.getElementById('success-modal').style.display = 'none';
    }

    // --- RIWAYAT & TRACKING SISTEM BARU ---
    const AUTO_CLEAR_TIME = 6 * 60 * 60 * 1000; // 6 Jam

    function saveOrderToHistory(orderId) {
        let history = JSON.parse(localStorage.getItem('sbs_order_history')) || [];
        if (!history.includes(orderId)) {
            history.push(orderId);
            localStorage.setItem('sbs_order_history', JSON.stringify(history));
        }
        trackOrders();
    }

    function trackOrders() {
        let history = JSON.parse(localStorage.getItem('sbs_order_history')) || [];
        const fabHistory = document.getElementById('fab-history');
        const badgeHistory = document.getElementById('badge-history');
        const container = document.getElementById('history-container');
        
        if (history.length === 0) {
            fabHistory.style.display = 'none';
            container.innerHTML = '<div style="text-align:center;color:#888;padding:20px;">Belum ada riwayat pesanan</div>';
            return;
        }

        fabHistory.style.display = 'flex';
        
        // Reset container
        container.innerHTML = `
            <div id="active-orders-section" style="display:none;">
                <div class="history-section-title" style="color:var(--sbs-orange)">SEDANG BERJALAN</div>
                <div id="list-active"></div>
            </div>
            <div id="past-orders-section" style="display:none;">
                <div class="history-section-title" style="color:#888">RIWAYAT SELESAI</div>
                <div id="list-past"></div>
                <button class="btn-clear-history" onclick="manualClearHistory()">Hapus Semua Riwayat</button>
            </div>
        `;

        const listActive = document.getElementById('list-active');
        const listPast = document.getElementById('list-past');
        let activeCount = 0;
        let pastCount = 0;
        const now = Date.now();

        history.forEach(orderId => {
            db.ref('orders/' + orderId).on('value', (snapshot) => {
                const data = snapshot.val();
                if (!data) return;

                // Auto-hide pesanan lama (> 6 jam)
                if (['completed', 'rejected'].includes(data.status)) {
                    const orderTime = new Date(data.completedAt || data.timestamp).getTime();
                    if (now - orderTime > AUTO_CLEAR_TIME) return;
                }

                let statusText = 'MENUNGGU';
                let color = '#888';
                let isActive = false;

                // Mapping Status
                if(data.status === 'new') { statusText = 'MENUNGGU KONFIRMASI'; color = '#888'; isActive = true; }
                else if(data.status === 'qris_unpaid') { statusText = 'MENUNGGU PEMBAYARAN'; color = '#e67e22'; isActive = true; }
                else if(data.status === 'pending_payment') { statusText = 'VERIFIKASI PEMBAYARAN'; color = '#e67e22'; isActive = true; }
                else if(data.status === 'unpaid') { statusText = 'DIPROSES'; color = '#FF6600'; isActive = true; }
                else if(data.status === 'processing') { statusText = 'SEDANG DISIAPKAN'; color = '#3498db'; isActive = true; }
                else if(data.status === 'completed') { statusText = 'SELESAI'; color = '#2ecc71'; isActive = false; }
                else if(data.status === 'rejected') { statusText = 'DITOLAK / BATAL'; color = 'red'; isActive = false; }

                if(document.getElementById('card-'+orderId)) return;

                // --- BAGIAN BARU: GENERATE DETAIL ITEM ---
                let itemsHtml = '';
                if(data.items) {
                    data.items.forEach(item => {
                        let subtotal = item.price * item.qty;
                        itemsHtml += `
                            <div class="h-row">
                                <div><span class="h-qty">${item.qty}x</span> ${item.name}</div>
                                <div>${subtotal.toLocaleString('id-ID')}</div>
                            </div>
                        `;
                    });
                }

                // Cek Total Final (jika ada diskon/pajak dari kasir)
                let finalTotal = data.total;
                if(data.finalData && data.finalData.finalTotal) finalTotal = data.finalData.finalTotal;

                const html = `
                    <div id="card-${orderId}" class="history-card" style="border-left:4px solid ${color}">
                        <div class="history-header">
                            <span>Meja: ${data.tableNumber || '-'} (${data.paymentMethod === 'qris' ? 'QRIS' : 'TUNAI'})</span>
                            <span style="font-family:monospace; color:#aaa;">#${orderId.slice(-4)}</span>
                        </div>
                        <div class="history-status" style="color:${color}; margin-bottom:5px;">${statusText}</div>
                        
                        <div class="history-details">
                            ${itemsHtml}
                            <div class="h-total-row">
                                <span>TOTAL</span>
                                <span>Rp ${parseInt(finalTotal).toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>
                `;
                // ------------------------------------------

                if (isActive) {
                    listActive.insertAdjacentHTML('beforeend', html);
                    activeCount++;
                    document.getElementById('active-orders-section').style.display = 'block';
                } else {
                    listPast.insertAdjacentHTML('beforeend', html);
                    pastCount++;
                    document.getElementById('past-orders-section').style.display = 'block';
                }

                // Update Badge Notifikasi
                if (activeCount > 0) {
                    fabHistory.classList.add('active-order');
                    badgeHistory.innerText = activeCount;
                    badgeHistory.classList.add('show');
                } else {
                    fabHistory.classList.remove('active-order');
                    badgeHistory.classList.remove('show');
                }
                
                if(activeCount === 0 && pastCount === 0) fabHistory.style.display = 'none';
            });
        });
    }

    function manualClearHistory() {
        // Jangan pakai confirm() biasa, panggil modal baru
        document.getElementById('clear-history-modal').style.display = 'flex';
    }

    function closeClearHistoryModal() {
        document.getElementById('clear-history-modal').style.display = 'none';
    }

    function executeClearHistory() {
        localStorage.removeItem('sbs_order_history');
        location.reload(); // Refresh halaman agar bersih
    }

    function openHistory() { 
        trackOrders();
        document.getElementById('history-modal').style.display = 'flex'; 
        document.body.classList.add('noscroll'); // KUNCI LAYAR
    }
    
    function closeHistory() { 
        document.getElementById('history-modal').style.display = 'none'; 
        document.body.classList.remove('noscroll'); // BUKA KUNCI
    }

    // --- TAB & SWIPE & SEARCH LOGIC ---
    function openT(e, n) {
        const searchInput = document.getElementById('menuSearch');
        if(searchInput && searchInput.value !== '') { clearSearchInput(); }
        var i, c, t;
        c = document.getElementsByClassName("content");
        for (i = 0; i < c.length; i++) c[i].classList.remove("active");
        t = document.getElementsByClassName("tab-btn");
        for (i = 0; i < t.length; i++) t[i].classList.remove("active");
        document.getElementById(n).classList.add("active");
        if(e && e.currentTarget) {
            e.currentTarget.classList.add("active");
            e.currentTarget.scrollIntoView({behavior: 'smooth', inline: 'center', block: 'nearest'});
        }
    }

    const swipeArea = document.getElementById('swipe-area');
    let startX = 0; let startY = 0; let endX = 0; let endY = 0;
    const minSwipeDistance = 70; 

    swipeArea.addEventListener('touchstart', (e) => {
        if(document.body.classList.contains('search-mode-active')) return;
        startX = e.changedTouches[0].screenX;
        startY = e.changedTouches[0].screenY; 
    }, {passive: true});

    swipeArea.addEventListener('touchend', (e) => {
        if(document.body.classList.contains('search-mode-active')) return;
        endX = e.changedTouches[0].screenX;
        endY = e.changedTouches[0].screenY; 
        handleSwipeGesture();
    }, {passive: true});

    function handleSwipeGesture() {
        const distanceX = endX - startX;
        const distanceY = endY - startY;
        if (Math.abs(distanceX) > minSwipeDistance && Math.abs(distanceX) > Math.abs(distanceY)) {
            const tabs = Array.from(document.querySelectorAll('.tab-btn'));
            const activeTab = document.querySelector('.tab-btn.active');
            const currentIndex = tabs.indexOf(activeTab);
            if (distanceX < 0) { if (currentIndex < tabs.length - 1) tabs[currentIndex + 1].click(); } 
            else { if (currentIndex > 0) tabs[currentIndex - 1].click(); }
        }
    }

    const searchInput = document.getElementById('menuSearch');
    const clearBtn = document.getElementById('clearSearch');
    const menuTabs = document.getElementById('menuTabs');
    const noResults = document.getElementById('no-results');
    const categoryMap = { 'kopi': ['black', 'white'], 'coffee': ['black', 'white'], 'alkohol': ['alcs'], 'beer': ['alcs'] };

    if(searchInput) {
        searchInput.addEventListener('keyup', (e) => {
            const term = e.target.value.toLowerCase().trim();
            clearBtn.style.display = term.length > 0 ? 'flex' : 'none';
            if (term.length === 0) { exitSearchMode(); return; }
            enterSearchMode();
            if (categoryMap[term]) { showFullCategories(categoryMap[term]); } else { filterSpecificItems(term); }
        });
    }

    function enterSearchMode() { document.body.classList.add('search-mode-active'); menuTabs.classList.add('hidden-by-search'); }
    function exitSearchMode() {
        document.body.classList.remove('search-mode-active'); menuTabs.classList.remove('hidden-by-search');
        document.querySelectorAll('.menu-card, .alcs-card').forEach(card => card.classList.remove('card-hidden'));
        document.querySelectorAll('.content').forEach(section => section.classList.remove('section-hidden'));
        noResults.style.display = 'none';
        const activeBtn = document.querySelector('.tab-btn.active');
        if(activeBtn) { const tabName = activeBtn.getAttribute('onclick').match(/'([^']+)'/)[1]; var c = document.getElementsByClassName("content"); for (var i = 0; i < c.length; i++) c[i].classList.remove("active"); document.getElementById(tabName).classList.add("active"); }
    }
    function clearSearchInput() { if(searchInput) searchInput.value = ''; if(clearBtn) clearBtn.style.display = 'none'; exitSearchMode(); }
    function showFullCategories(targetIds) { let hasResult = false; document.querySelectorAll('.content').forEach(section => { if (targetIds.includes(section.id)) { section.classList.remove('section-hidden'); section.querySelectorAll('.menu-card, .alcs-card').forEach(c => c.classList.remove('card-hidden')); hasResult = true; } else { section.classList.add('section-hidden'); } }); noResults.style.display = hasResult ? 'none' : 'block'; }
    function filterSpecificItems(term) { let hasResult = false; document.querySelectorAll('.content').forEach(section => { let visibleCardsCount = 0; const cards = section.querySelectorAll('.menu-card, .alcs-card'); cards.forEach(card => { const textContent = card.innerText.toLowerCase(); const imgAlt = card.querySelector('img') ? card.querySelector('img').alt.toLowerCase() : ''; const tags = card.getAttribute('data-tags') ? card.getAttribute('data-tags').toLowerCase() : ''; if (textContent.includes(term) || imgAlt.includes(term) || tags.includes(term)) { card.classList.remove('card-hidden'); visibleCardsCount++; hasResult = true; } else { card.classList.add('card-hidden'); } }); if (visibleCardsCount > 0) { section.classList.remove('section-hidden'); } else { section.classList.add('section-hidden'); } }); noResults.style.display = hasResult ? 'none' : 'block'; }
</script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        // SVG: Kursor Tangan Putih mengetuk Tombol Bulat Kuning berisi (+)
        const tapIconSVG = `
            <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="16" cy="9" r="5" stroke="#FFD200" />
              
              <path d="M16 6.5v5 M13.5 9h5" stroke="#FFD200" />

              <path d="M9.5 13L6 16.5c-1 1-1 2.5 0 3.5s2.5 1 3.5 0l3.5-3.5" stroke="white"/>
              <path d="M13 16.5l2.5-2.5c.5-.5 1.5-.5 2 0l1 1" stroke="white"/>
              <path d="M9.5 13l2.5-7.5c.3-.8 1.5-.8 1.8 0l2.5 7.5" stroke="white"/>
            </svg>
        `;

        // Cari semua elemen badge lama dan ganti isinya dengan icon baru
        const badges = document.querySelectorAll('.add-badge');
        badges.forEach(badge => {
            badge.innerHTML = tapIconSVG;
        });
    });
</script>
</body>
</html>
