<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBS Authentic Menu</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@700;900&family=Poppins:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root { --sbs-yellow: #FFD200; --sbs-black: #1A1A1A; --sbs-orange: #FF6600; --sbs-dark-yellow: #FFB800; }
        body { font-family: 'Poppins', sans-serif; margin: 0; padding: 15px; color: var(--sbs-black); background: repeating-linear-gradient(45deg, rgba(0,0,0,0.03) 0px, rgba(0,0,0,0.03) 1px, transparent 1px, transparent 4px), radial-gradient(circle at center, var(--sbs-yellow) 0%, #e6bc00 100%); background-attachment: fixed; overscroll-behavior-y: contain; padding-bottom: 120px; }
        .top-bar { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .logo-container { width: 70px; height: 70px; background: var(--sbs-black); border-radius: 50%; border: 3px solid #fff; display: flex; align-items: center; justify-content: center; overflow: hidden; flex-shrink: 0; }
        .logo-container img { width: 100%; height: auto; }
        .header-title h1 { font-family: 'Bebas Neue', cursive; font-size: 55px; margin: 0; line-height: 0.8; letter-spacing: -1px; transform: skew(-5deg); text-shadow: 4px 4px 0px #fff; }

        #status-tracker { position: fixed; top: 0; left: 0; width: 100%; background: var(--sbs-black); color: #fff; padding: 10px; z-index: 2000; text-align: center; font-size: 14px; font-weight: bold; display: none; box-shadow: 0 5px 15px rgba(0,0,0,0.3); cursor: pointer; }
        .status-badge { background: var(--sbs-orange); color: #fff; padding: 3px 10px; border-radius: 5px; margin-left: 10px; text-transform: uppercase; }
        
        .search-wrapper { position: relative; margin-bottom: 20px; z-index: 101; }
        .search-box { width: 100%; box-sizing: border-box; background: #fff; border: 3px solid var(--sbs-black); border-radius: 50px; padding: 12px 20px 12px 45px; font-family: 'Montserrat', sans-serif; font-weight: 700; text-transform: uppercase; outline: none; box-shadow: 4px 4px 0px rgba(0,0,0,0.1); }
        .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); width: 18px; opacity: 0.6; }
        .clear-btn { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: #ddd; border: none; width: 20px; height: 20px; border-radius: 50%; display: none; align-items: center; justify-content: center; cursor: pointer; font-weight: bold; font-size: 12px;}
        .tabs { display: flex; overflow-x: auto; gap: 10px; padding: 12px; margin-bottom: 25px; position: sticky; top: 10px; z-index: 100; background: var(--sbs-dark-yellow); border: 3px solid var(--sbs-black); border-radius: 50px; box-shadow: 6px 6px 0px rgba(0,0,0,0.1); scrollbar-width: none; }
        .tabs.hidden-by-search { display: none; }
        .tab-btn { background: #fff; border: 2px solid var(--sbs-black); padding: 8px 20px; border-radius: 50px; font-family: 'Montserrat', sans-serif; font-size: 11px; text-transform: uppercase; white-space: nowrap; cursor: pointer; box-shadow: 3px 3px 0px rgba(0,0,0,0.2); transition: 0.1s; }
        .tab-btn.active { background: var(--sbs-black); color: #fff; transform: translate(2px, 2px); box-shadow: none; }

        .content { display: none; grid-template-columns: 1fr; gap: 30px; }
        .content.active { display: grid; animation: fadeIn 0.4s ease-out; }
        .search-mode-active .content { display: grid !important; animation: none; }
        .card-hidden, .section-hidden { display: none !important; }
        
        .menu-card { background: #fff; border: 3px solid var(--sbs-black); border-radius: 25px; overflow: hidden; box-shadow: 10px 10px 0px var(--sbs-black); position: relative; display: flex; flex-direction: column; cursor: pointer; transition: transform 0.1s; }
        .menu-card:active { transform: scale(0.98); }
        .card-img-box { width: 100%; height: auto; aspect-ratio: 1 / 1; position: relative; background: #eee; border-bottom: 3px solid var(--sbs-black); }
        .card-img-box img { width: 100%; height: 100%; object-fit: cover; }
        .best-rec { border-color: var(--sbs-orange); box-shadow: 10px 10px 0px var(--sbs-orange); }
        .add-badge { position: absolute; bottom: 15px; right: 15px; background: var(--sbs-orange); color: #fff; width: 50px; height: 50px; border-radius: 50%; border: 3px solid var(--sbs-black); display: flex; align-items: center; justify-content: center; box-shadow: 3px 3px 0px var(--sbs-black); transition: 0.2s; z-index: 10; opacity: 0.9; }
        .add-badge svg { width: 24px; height: 24px; fill: white; }
        .menu-card:active .add-badge { transform: scale(1.1); background: var(--sbs-black); opacity: 1; }
        
        .alcs-card { background: #fff; border: 3px solid var(--sbs-black); box-shadow: 8px 8px 0px var(--sbs-black); border-radius: 20px; padding: 20px; margin-bottom: 0; position: relative; }
        .alcs-brand { font-family: 'Montserrat', sans-serif; font-size: 26px; text-transform: uppercase; font-weight: 900; border-bottom: 3px solid #eee; padding-bottom: 8px; margin-bottom: 15px;}
        .alcs-row { display: flex; justify-content: space-between; font-size: 16px; border-bottom: 1px dashed #ddd; padding: 5px 0; cursor: pointer;}
        .alcs-variant { font-weight: 500; }
        .alcs-price-tag { font-family: 'Montserrat', sans-serif; font-weight: 800; }

        #cart-bar { position: fixed; bottom: 20px; left: 20px; right: 20px; background: var(--sbs-black); color: #fff; padding: 15px 25px; border-radius: 50px; display: none; justify-content: space-between; align-items: center; box-shadow: 0px 10px 20px rgba(0,0,0,0.5); z-index: 999; font-family: 'Montserrat', sans-serif; cursor: pointer; border: 2px solid #fff; animation: slideUp 0.3s ease-out; }
        .cart-left { display: flex; flex-direction: column; }
        .cart-hint { font-size: 10px; color: var(--sbs-yellow); text-transform: uppercase; font-weight: bold; margin-bottom: -2px; }
        #cart-info { font-weight: bold; font-size: 15px; }
        #cart-total { color: #fff; font-size: 16px; font-weight: 900; }
        .view-btn { font-size: 10px; background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 10px; margin-top: 2px; display: inline-block; }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.85); align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; }
        .modal-content { background-color: #fff; width: 100%; max-width: 450px; border-radius: 20px; padding: 25px; border: 4px solid var(--sbs-black); max-height: 85vh; overflow-y: auto; position: relative; }
        .modal-header { font-family: 'Bebas Neue'; font-size: 30px; margin-bottom: 15px; border-bottom: 2px solid #eee; }
        
        .cart-item { margin-bottom: 15px; border-bottom: 1px dashed #ddd; padding-bottom: 10px; }
        .item-main { display: flex; justify-content: space-between; font-size: 14px; font-weight: bold; }
        .item-note-input { width: 100%; border: 1px solid #ddd; border-radius: 8px; padding: 8px; margin-top: 8px; font-size: 12px; font-family: 'Poppins'; outline: none; box-sizing: border-box; }
        .item-note-input:focus { border-color: var(--sbs-orange); background: #fffdf9; }
        .cart-actions button { background: #ddd; border: none; padding: 2px 8px; border-radius: 5px; font-weight: bold; cursor: pointer; margin-left: 5px;}
        .total-row { display: flex; justify-content: space-between; margin-top: 20px; font-weight: bold; font-size: 18px; border-top: 2px solid var(--sbs-black); padding-top: 10px; }
        
        .input-group { margin-top: 15px; }
        .input-group label { display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #666; }
        .input-group input, .input-group select { width: 100%; padding: 10px; border: 2px solid var(--sbs-black); border-radius: 10px; box-sizing: border-box; font-family: 'Poppins'; font-size: 14px; background: #fff; }
        .input-group input:focus, .input-group select:focus { border-color: var(--sbs-orange); outline: none; background: #fffdf9; }
        
        .btn-order { background: var(--sbs-orange); color: #fff; border: 3px solid var(--sbs-black); width: 100%; padding: 12px; border-radius: 10px; font-weight: bold; margin-top: 20px; cursor: pointer; font-size: 16px; }
        .close-modal { position: absolute; top: 15px; right: 20px; font-size: 24px; cursor: pointer; font-weight: bold; }

        #success-modal .modal-content { text-align: center; border-color: #28a745; }
        .success-icon { font-size: 60px; color: #28a745; margin-bottom: 15px; }
        .success-msg { font-size: 16px; line-height: 1.6; color: #444; margin-bottom: 20px; }
        .btn-close-final { background: var(--sbs-black); color: #fff; padding: 12px 30px; border-radius: 50px; border: none; font-weight: bold; cursor: pointer; width: 100%; }

        .history-card { border: 2px solid #eee; border-radius: 10px; padding: 10px; margin-bottom: 10px; background: #f9f9f9; }
        .history-header { display: flex; justify-content: space-between; font-size: 12px; font-weight: bold; color: #666; margin-bottom: 5px; }
        .history-status { font-size: 14px; font-weight: 900; color: var(--sbs-black); text-transform: uppercase; }
        .history-items { font-size: 13px; margin-top: 5px; border-top: 1px dashed #ddd; padding-top: 5px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(100px); } to { transform: translateY(0); } }
    </style>
</head>
<body>

<div id="status-tracker" onclick="openHistory()">
    <span id="tracker-summary">Pesananmu Sedang Diproses</span> 
    <span class="status-badge" style="font-size:10px;">LIHAT DETAIL ></span>
</div>

<div class="top-bar">
    <div class="logo-container"><img src="img/sbslogo.jpg" alt="SBS Logo"></div>
    <div class="header-title"><h1>OUR MENU</h1></div>
</div>

<div class="search-wrapper">
    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
    <input type="text" id="menuSearch" class="search-box" placeholder="Cari menu..." autocomplete="off">
    <button id="clearSearch" class="clear-btn" onclick="clearSearchInput()">✕</button>
</div>

<div class="tabs" id="menuTabs">
    <button class="tab-btn active" onclick="openT(event, 'makan')">Makan Berat</button>
    <button class="tab-btn" onclick="openT(event, 'cemil')">Cemal-Cemil</button>
    <button class="tab-btn" onclick="openT(event, 'black')">Black</button>
    <button class="tab-btn" onclick="openT(event, 'white')">White</button>
    <button class="tab-btn" onclick="openT(event, 'comfy')">Comfy</button>
    <button class="tab-btn" onclick="openT(event, 'refresh')">Refreshing</button>
    <button class="tab-btn" onclick="openT(event, 'alcs')">Alcs</button>
</div>

<div id="swipe-area">
    <div id="no-results" style="display:none; text-align:center; opacity:0.5; margin-top:50px; font-weight:bold;">MENU TIDAK DITEMUKAN</div>

    <div id="makan" class="content active">
        <div class="menu-card" onclick="addToCart('Kalter', 20000)" data-name="Kalter" data-price="20000" data-tags="nasi tahu telor rice tofu egg telur vegetarian kalter"><div class="card-img-box"><img src="img/kalter.webp" alt="Kalter"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Obama', 25000)" data-name="Obama" data-price="25000" data-tags="nasi ayam geprek sambal matah rice chicken pedas spicy hot chili obama"><div class="card-img-box"><img src="img/obama.webp" alt="Obama"></div><div class="add-badge">+</div></div>
        <div class="menu-card best-rec" onclick="addToCart('Mangku Koe', 28000)" data-name="Mangku Koe" data-price="28000" data-tags="nasi chicken katsu kari rice ayam curry japanese food mangku koe"><div class="card-img-box"><img src="img/mangkukoe.webp" alt="Mangku Koe"></div><div class="add-badge">+</div></div>
        <div class="menu-card best-rec" onclick="addToCart('Mangku Ayang', 25000)" data-name="Mangku Ayang" data-price="25000" data-tags="nasi ayam siram rice chicken gravy sauce mangku ayang"><div class="card-img-box"><img src="img/mangkuayang.webp" alt="Mangku Ayang"></div><div class="add-badge">+</div></div>
        <div class="menu-card best-rec" onclick="addToCart('Barudak', 20000)" data-name="Barudak" data-price="20000" data-tags="bakmie katsu sambal matah mie noodle noodles ayam chicken pedas spicy hot barudak"><div class="card-img-box"><img src="img/barudak.webp" alt="Barudak"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Sekena Gomes', 22000)" data-name="Sekena Gomes" data-price="22000" data-tags="nasgor merah katsu sambal matah nasi goreng fried rice red ayam chicken pedas spicy hot sekena gomes"><div class="card-img-box"><img src="img/sekenagomes.webp" alt="Sekena Gomes"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Sekena Goput', 22000)" data-name="Sekena Goput" data-price="22000" data-tags="nasgor putih katsu sambal matah nasi goreng fried rice white ayam chicken pedas spicy hot sekena goput"><div class="card-img-box"><img src="img/sekenagoput.webp" alt="Sekena Goput"></div><div class="add-badge">+</div></div>
        <div class="menu-card best-rec" onclick="addToCart('Sekena Keren', 25000)" data-name="Sekena Keren" data-price="25000" data-tags="nasgor kari katsu sambal matah nasi goreng fried rice curry ayam chicken pedas spicy hot sekena keren"><div class="card-img-box"><img src="img/sekenakeren.webp" alt="Sekena Keren"></div><div class="add-badge">+</div></div>
    </div>

    <div id="cemil" class="content">
        <div class="menu-card best-rec" onclick="addToCart('Paket Sambat', 35000)" data-name="Paket Sambat" data-price="35000" data-tags="aneka camilan snack platter sosis sausage kentang fries gorengan paket sambat"><div class="card-img-box"><img src="img/paketsambat.webp" alt="Paket Sambat"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Cricket', 25000)" data-name="Cricket" data-price="25000" data-tags="chicken fillet lava ayam boneless pedas spicy hot snack cricket"><div class="card-img-box"><img src="img/cricket.webp" alt="Cricket"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Potato Freak', 17000)" data-name="Potato Freak" data-price="17000" data-tags="french fries kentang goreng potato chips asin salty snack potato freak"><div class="card-img-box"><img src="img/potatofreak.webp" alt="Potato Freak"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Uhat Lawik', 17000)" data-name="Uhat Lawik" data-price="17000" data-tags="tahu walik tofu aci goreng crispy snack uhat lawik"><div class="card-img-box"><img src="img/uhatlawik.webp" alt="Uhat Lawik"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Gyozable', 18000)" data-name="Gyozable" data-price="18000" data-tags="gyoza dimsum dumpling ayam chicken kukus steam goreng fried gyozable"><div class="card-img-box"><img src="img/gyozable.webp" alt="Gyozable"></div><div class="add-badge">+</div></div>
        <div class="menu-card best-rec" onclick="addToCart('Tahu Julit', 19000)" data-name="Tahu Julit" data-price="19000" data-tags="tahu cabe garam tofu chili salt pedas spicy hot asin snack tahu julit"><div class="card-img-box"><img src="img/tahujulit.webp" alt="Tahu Julit"></div><div class="add-badge">+</div></div>
    </div>

    <div id="black" class="content">
        <div class="menu-card best-rec" onclick="addToCart('Fressa', 25000)" data-name="Fressa" data-price="25000" data-tags="berry soda coffee kopi buah segar fizz fressa"><div class="card-img-box"><img src="img/fressa.webp" alt="Fressa"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Americano', 16000)" data-name="Americano" data-price="16000" data-tags="americano kopi hitam black coffee pahit bitter no sugar"><div class="card-img-box"><img src="img/americano.webp" alt="Americano"></div><div class="add-badge">+</div></div>
        <div class="menu-card best-rec" onclick="addToCart('Dark Freshly', 19000)" data-name="Dark Freshly" data-price="19000" data-tags="americano lemon kopi coffee citrus segar fresh dark freshly"><div class="card-img-box"><img src="img/darkfreshly.webp" alt="Dark Freshly"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Darkberry', 19000)" data-name="Darkberry" data-price="19000" data-tags="americano berry kopi coffee strawberry fruity darkberry"><div class="card-img-box"><img src="img/darkberry.webp" alt="Darkberry"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Tubruk Syari', 13000)" data-name="Tubruk Syari" data-price="13000" data-tags="kopi tubruk traditional black coffee ampas tubruk syari"><div class="card-img-box"><img src="img/tubruksyari.webp" alt="Tubruk Syari"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Hanoi Tears', 15000)" data-name="Hanoi Tears" data-price="15000" data-tags="vietnam drip kopi susu milk condensed manis sweet hanoi tears"><div class="card-img-box"><img src="img/hanoitears.webp" alt="Hanoi Tears"></div><div class="add-badge">+</div></div>
    </div>

    <div id="white" class="content">
        <div class="menu-card best-rec" onclick="addToCart('Penkopi', 23000)" data-name="Penkopi" data-price="23000" data-tags="creamy coffee kopi susu milk latte palm sugar gula aren penkopi"><div class="card-img-box"><img src="img/penkopi.webp" alt="Penkopi"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Macch Favorito', 20000)" data-name="Macch Favorito" data-price="20000" data-tags="caramel macchiato kopi coffee susu milk karamel manis sweet macch favorito"><div class="card-img-box"><img src="img/macchfavorito.webp" alt="Macch Favorito"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Specta', 25000)" data-name="Specta" data-price="25000" data-tags="peanut coffee kopi kacang skippy jam susu milk specta"><div class="card-img-box"><img src="img/specta.webp" alt="Specta"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Comica', 22000)" data-name="Comica" data-price="22000" data-tags="hazelnut coffee kopi susu milk kacang wangi comica"><div class="card-img-box"><img src="img/comica.webp" alt="Comica"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Rhumpee', 20000)" data-name="Rhumpee" data-price="20000" data-tags="rhum coffee rum non alkohol kopi susu milk wangi rhumpee"><div class="card-img-box"><img src="img/rhumpee.webp" alt="Rhumpee"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Crush', 22000)" data-name="Crush" data-price="22000" data-tags="rhum regal coffee rum biskuit biscuit marie susu milk crush"><div class="card-img-box"><img src="img/crush.webp" alt="Crush"></div><div class="add-badge">+</div></div>
    </div>

    <div id="comfy" class="content">
        <div class="menu-card best-rec" onclick="addToCart('Mammy', 18000)" data-name="Mammy" data-price="18000" data-tags="matcha latte green tea teh hijau susu milk japanese mammy"><div class="card-img-box"><img src="img/mammy.webp" alt="Mammy"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Deep Choc', 18000)" data-name="Deep Choc" data-price="18000" data-tags="chocolate coklat cocoa susu milk manis sweet deep choc"><div class="card-img-box"><img src="img/deepchoc.webp" alt="Deep Choc"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Schopea', 25000)" data-name="Schopea" data-price="25000" data-tags="peanut chocolate coklat kacang susu milk schopea"><div class="card-img-box"><img src="img/schopea.webp" alt="Schopea"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Creamberry', 23000)" data-name="Creamberry" data-price="23000" data-tags="berry latte strawberry susu milk fruity creamberry"><div class="card-img-box"><img src="img/creamberry.webp" alt="Creamberry"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Jandu', 18000)" data-name="Jandu" data-price="18000" data-tags="jahe madu ginger honey hangat warm herbal wedang jandu"><div class="card-img-box"><img src="img/jandu.webp" alt="Jandu"></div><div class="add-badge">+</div></div>
    </div>

    <div id="refresh" class="content">
        <div class="menu-card" onclick="addToCart('Threepi', 15000)" data-name="Threepi" data-price="15000" data-tags="tropical tea teh buah fruit segar fresh threepi"><div class="card-img-box"><img src="img/threepi.webp" alt="Threepi"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Teh Gelies', 10000)" data-name="Teh Gelies" data-price="10000" data-tags="jasmine tea teh melati manis sweet es ice teh gelies"><div class="card-img-box"><img src="img/tehgelies.webp" alt="Teh Gelies"></div><div class="add-badge">+</div></div>
        <div class="menu-card best-rec" onclick="addToCart('Red Bloom', 18000)" data-name="Red Bloom" data-price="18000" data-tags="yakult berry yogurt strawberry probiotik asam manis sour sweet red bloom"><div class="card-img-box"><img src="img/redbloom.webp" alt="Red Bloom"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Yagustea', 15000)" data-name="Yagustea" data-price="15000" data-tags="yakult sugus grape anggur permen candy ungu purple yagustea"><div class="card-img-box"><img src="img/yagustea.webp" alt="Yagustea"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Chenteal', 15000)" data-name="Chenteal" data-price="15000" data-tags="yakult lychee tea leci teh fruit chenteal"><div class="card-img-box"><img src="img/chenteal.webp" alt="Chenteal"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Trustey', 18000)" data-name="Trustey" data-price="18000" data-tags="honey yuzu madu jeruk citrus orange lemon segar trustey"><div class="card-img-box"><img src="img/trustey.webp" alt="Trustey"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Rindu', 15000)" data-name="Rindu" data-price="15000" data-tags="winter melon kundur buah manis segar rindu"><div class="card-img-box"><img src="img/rindu.webp" alt="Rindu"></div><div class="add-badge">+</div></div>
        <div class="menu-card" onclick="addToCart('Literally Water', 5000)" data-name="Literally Water" data-price="5000" data-tags="air mineral water bening tawar literally water"><div class="card-img-box"><img src="img/literallywater.webp" alt="Literally Water"></div><div class="add-badge">+</div></div>
    </div>

    <div id="alcs" class="content">
        <div class="alcs-card" data-tags="bintang beer bir pilsener alkohol alcohol">
            <div class="alcs-brand">BINTANG</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Bintang Small', 32000)"><span class="alcs-variant">Small</span><span class="alcs-price-tag">32K</span></div>
                <div class="alcs-row" onclick="addToCart('Bintang Radler', 32000)"><span class="alcs-variant">Radler</span><span class="alcs-price-tag">32K</span></div>
                <div class="alcs-row" onclick="addToCart('Bintang Large', 50000)"><span class="alcs-variant">Large</span><span class="alcs-price-tag">50K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="anker beer bir lychee leci pineapple nanas alkohol alcohol">
            <div class="alcs-brand">ANKER</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Anker Lychee', 29000)"><span class="alcs-variant">Lychee</span><span class="alcs-price-tag">29K</span></div>
                <div class="alcs-row" onclick="addToCart('Anker Pineapple', 29000)"><span class="alcs-variant">Pineapple</span><span class="alcs-price-tag">29K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="smirnoff vodka raspberry berry green apple apel hijau lemon lychee leci pink lemonade alkohol alcohol">
            <div class="alcs-brand">SMIRNOFF</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Smirnoff Raspberry', 33000)"><span class="alcs-variant">Raspberry</span><span class="alcs-price-tag">33K</span></div>
                <div class="alcs-row" onclick="addToCart('Smirnoff Green Apple', 33000)"><span class="alcs-variant">Green Apple</span><span class="alcs-price-tag">33K</span></div>
                <div class="alcs-row" onclick="addToCart('Smirnoff Lemon Lyc', 33000)"><span class="alcs-variant">Lemon Lychee</span><span class="alcs-price-tag">33K</span></div>
                <div class="alcs-row" onclick="addToCart('Smirnoff Pink Lem', 33000)"><span class="alcs-variant">Pink Lemonade</span><span class="alcs-price-tag">33K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="mix max vodka anggur merah red grape exotic blue biru alkohol alcohol">
            <div class="alcs-brand">MIX MAX</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Mix Max Anggur', 34000)"><span class="alcs-variant">Anggur Merah</span><span class="alcs-price-tag">34K</span></div>
                <div class="alcs-row" onclick="addToCart('Mix Max Blue', 34000)"><span class="alcs-variant">Exotic Blue</span><span class="alcs-price-tag">34K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="iceland vodka lychee leci long island alkohol alcohol">
            <div class="alcs-brand">ICELAND</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Iceland Lychee', 34000)"><span class="alcs-variant">Lychee</span><span class="alcs-price-tag">34K</span></div>
                <div class="alcs-row" onclick="addToCart('Iceland L. Island', 34000)"><span class="alcs-variant">Long Island</span><span class="alcs-price-tag">34K</span></div>
            </div>
        </div>
        <div class="alcs-card" data-tags="api anggur hijau green grape kawa kawi arak bali alkohol alcohol">
            <div class="alcs-brand">API</div>
            <div class="alcs-list">
                <div class="alcs-row" onclick="addToCart('Api Anggur Hijau', 106000)"><span class="alcs-variant">Anggur Hijau</span><span class="alcs-price-tag">106K</span></div>
            </div>
        </div>
    </div>
</div>

<div id="cart-bar" onclick="openCart()">
    <div class="cart-left">
        <span class="cart-hint">Pesanan Kamu</span>
        <span id="cart-info">0 ITEM</span>
    </div>
    <div class="cart-right">
        <span id="cart-total">Rp 0</span><br>
        <span class="view-btn">Lihat Detail &gt;</span>
    </div>
</div>

<div id="cart-modal" class="modal">
    <div class="modal-content">
        <div class="close-modal" onclick="closeCart()">&times;</div>
        <div class="modal-header">PESANANMU</div>
        <div id="cart-items-container"></div>
        
        <div class="total-row">
            <span>TOTAL</span>
            <span id="modal-total">Rp 0</span>
        </div>
        
        <div class="input-group">
            <label>Nomor Meja*</label>
            <input type="number" id="table-number" placeholder="Scan QR Meja..." required inputmode="numeric">
        </div>
        <div class="input-group">
            <label>Nama Kakak*</label>
            <input type="text" id="customer-real-name" placeholder="Siapa nama kakak?" required>
        </div>
        
        <div class="input-group">
            <label>Metode Pembayaran*</label>
            <select id="payment-method">
                <option value="tunai">Bayar Tunai di Kasir</option>
                <option value="qris">QRIS / E-Wallet (Bayar Sekarang)</option>
            </select>
        </div>
        
        <div class="input-group">
            <label>Nomor HP / WA (Opsional)</label>
            <input type="tel" id="customer-phone" placeholder="08xxxxxxxxxx" inputmode="tel">
        </div>

        <button class="btn-order" onclick="submitOrder()">KIRIM KE DAPUR</button>
    </div>
</div>

<div id="success-modal" class="modal">
    <div class="modal-content">
        </div>
</div>

<div id="history-modal" class="modal">
    <div class="modal-content">
        <div class="close-modal" onclick="closeHistory()">&times;</div>
        <div class="modal-header">RIWAYAT PESANAN</div>
        <div id="history-container" style="padding-bottom:10px;">
            </div>
        <button class="btn-close-final" onclick="closeHistory()">TUTUP</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

<script>
    // --- KONFIGURASI FIREBASE (PASTIKAN KONEKSI INI BENAR) ---
    const firebaseConfig = {
        apiKey: "AIzaSyBSp5184dVTy-EER2qOfxeEA9KQOCMFpKo",
        authDomain: "sbs-menu-d1611.firebaseapp.com",
        databaseURL: "https://sbs-menu-d1611-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "sbs-menu-d1611",
        storageBucket: "sbs-menu-d1611.firebasestorage.app",
        messagingSenderId: "530098727952",
        appId: "1:530098727952:web:1bb3072d93be9564fbee95"
    };

    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.database();

    // --- LOGIC CART ---
    let cart = [];
    let currentOrderId = null;

    // FUNGSI CEK URL (?table=5)
    function getTableFromURL() {
        const params = new URLSearchParams(window.location.search);
        return params.get('table');
    }

    // SAAT PAGE LOAD
    window.onload = function() {
        const tableFromURL = getTableFromURL();
        const tableInput = document.getElementById('table-number');
        
        if (tableFromURL) {
            // Jika ada scan QR (?table=5), isi otomatis dan kunci
            tableInput.value = tableFromURL;
            tableInput.readOnly = true;
            tableInput.style.backgroundColor = "#eee"; 
            tableInput.placeholder = "Meja " + tableFromURL;
        } else {
            // Jika buka link biasa, biarkan bisa diketik manual
            tableInput.readOnly = false;
            tableInput.style.backgroundColor = "#fff";
            tableInput.placeholder = "Ketik Nomor Meja...";
        }
    };

    function addToCart(name, price) {
        const existingItem = cart.find(item => item.name === name);
        if (existingItem) {
            existingItem.qty++;
        } else {
            cart.push({ name: name, price: price, qty: 1, note: '' });
        }
        updateCartUI();
        if (navigator.vibrate) navigator.vibrate(50);
    }

    function updateCartUI() {
        const bar = document.getElementById('cart-bar');
        let totalQty = 0;
        let totalPrice = 0;
        cart.forEach(item => {
            totalQty += item.qty;
            totalPrice += (item.price * item.qty);
        });

        if (totalQty > 0) {
            bar.style.display = 'flex';
            document.getElementById('cart-info').innerText = totalQty + " ITEM";
            document.getElementById('cart-total').innerText = "Rp " + totalPrice.toLocaleString('id-ID');
        } else {
            bar.style.display = 'none';
        }
    }

    function openCart() {
        const modal = document.getElementById('cart-modal');
        const container = document.getElementById('cart-items-container');
        const modalTotal = document.getElementById('modal-total');
        
        container.innerHTML = '';
        let totalPrice = 0;

        cart.forEach((item, index) => {
            totalPrice += (item.price * item.qty);
            container.innerHTML += `
                <div class="cart-item">
                    <div class="item-main">
                        <span>${item.name} <small>(${item.qty}x)</small></span>
                        <span>Rp ${(item.price * item.qty).toLocaleString()}</span>
                    </div>
                    <div class="cart-actions" style="margin-top:5px; margin-bottom:5px;">
                        <button onclick="changeQty(${index}, -1)">-</button>
                        <span style="margin:0 5px;">${item.qty}</span>
                        <button onclick="changeQty(${index}, 1)">+</button>
                    </div>
                    <input type="text" class="item-note-input" 
                           placeholder="Catatan..." 
                           value="${item.note}" 
                           onchange="updateNote(${index}, this.value)">
                </div>
            `;
        });

        modalTotal.innerText = "Rp " + totalPrice.toLocaleString('id-ID');
        modal.style.display = 'flex';
    }

    function updateNote(index, value) {
        cart[index].note = value;
    }

    function changeQty(index, delta) {
        cart[index].qty += delta;
        if (cart[index].qty <= 0) {
            cart.splice(index, 1);
        }
        updateCartUI();
        openCart(); 
    }

    function closeCart() {
        document.getElementById('cart-modal').style.display = 'none';
    }

    // --- FUNGSI KIRIM PESANAN ---
    function submitOrder() {
        const tableNum = document.getElementById('table-number').value;
        const custName = document.getElementById('customer-real-name').value;
        const custPhone = document.getElementById('customer-phone').value;
        const paymentMethod = document.getElementById('payment-method').value;

        // Validasi
        if (!tableNum) { alert("Mohon isi Nomor Meja!"); return; }
        if (!custName) { alert("Mohon isi Nama Kakak!"); return; }
        if (cart.length === 0) return;

        let totalPrice = 0;
        cart.forEach(item => totalPrice += (item.price * item.qty));

        // LOGIKA STATUS AWAL
        // Tunai: 'new' (Masuk tab KASIR)
        // QRIS: 'qris_unpaid' (Masuk tab KASIR tapi tombol terkunci sampai user klik bayar)
        let initialStatus = (paymentMethod === 'tunai') ? 'new' : 'qris_unpaid';

        const orderData = {
            tableNumber: tableNum,
            customerName: custName,
            customerPhone: custPhone,
            paymentMethod: paymentMethod,
            items: cart,
            total: totalPrice,
            timestamp: new Date().toISOString(),
            status: initialStatus
        };

        const newOrderRef = db.ref().child('orders').push();
        newOrderRef.set(orderData)
        .then(() => {
            currentOrderId = newOrderRef.key;
            saveOrderToHistory(currentOrderId);
            
            // Bersihkan Keranjang
            cart = []; 
            updateCartUI();
            closeCart();
            
            // Reset Form (kecuali meja jika scan QR)
            if(!document.getElementById('table-number').readOnly) {
                document.getElementById('table-number').value = '';
            }
            document.getElementById('customer-real-name').value = '';
            
            // TAMPILKAN MODAL SESUAI METODE BAYAR
            if(paymentMethod === 'qris') {
                showQRISModal(totalPrice);
            } else {
                showSuccessModal();
            }
        })
        .catch((error) => {
            alert("Gagal mengirim: " + error.message);
        });
    }

    // --- MODAL SUKSES (TUNAI) ---
    function showSuccessModal() {
        const modal = document.getElementById('success-modal');
        modal.querySelector('.modal-content').innerHTML = `
            <div class="success-icon">✔</div>
            <div class="modal-header" style="border:none; margin-bottom:5px; text-align:center;">PESANAN DITERIMA!</div>
            <div class="success-msg">
                Mohon lakukan pembayaran di <b>KASIR</b><br>
                agar pesanan segera diproses.
            </div>
            <button class="btn-close-final" onclick="closeSuccess()">OK, MENGERTI</button>
        `;
        modal.style.display = 'flex';
    }

    // --- MODAL QRIS (BARU - DENGAN LOGIKA TOMBOL) ---
    function showQRISModal(amount) {
        const modal = document.getElementById('success-modal');
        // Ganti 'img/qris-dummy.jpg' dengan URL gambar QRIS asli Anda
        modal.querySelector('.modal-content').innerHTML = `
            <div class="modal-header" style="border:none; text-align:center; font-size:24px;">SCAN QRIS</div>
            <div style="text-align:center; margin-bottom:15px;">
                <img src="img/qris-dummy.jpg" alt="QRIS Code" style="width:200px; height:200px; border:2px solid #000; padding:5px;">
                <br>
                <div style="font-weight:bold; font-size:18px; margin-top:10px;">Rp ${amount.toLocaleString('id-ID')}</div>
            </div>
            <div class="success-msg" style="font-size:12px;">
                1. Scan QR di atas.<br>
                2. Setelah transfer berhasil, <b>WAJIB KLIK TOMBOL DI BAWAH</b> agar pesanan masuk ke Kasir.
            </div>
            <button class="btn-close-final" onclick="confirmPayment()" style="background:#28a745;">SAYA SUDAH BAYAR</button>
        `;
        modal.style.display = 'flex';
    }

    function confirmPayment() {
        if(!currentOrderId) return;
        
        // Update database: Ubah status jadi 'pending_payment' DAN catat waktu klaim
        // Ini yang akan membuka gembok di Dapur.html
        db.ref('orders/' + currentOrderId).update({
            status: 'pending_payment',
            paymentClaimedAt: new Date().toISOString()
        }).then(() => {
            alert("Terima kasih! Notifikasi sudah dikirim ke Kasir untuk diverifikasi. Mohon tunggu sebentar.");
            document.getElementById('success-modal').style.display = 'none';
        });
    }

    function closeSuccess() {
        document.getElementById('success-modal').style.display = 'none';
    }

    // --- RIWAYAT & TRACKING ---
    function saveOrderToHistory(orderId) {
        let history = JSON.parse(localStorage.getItem('sbs_order_history')) || [];
        history.push(orderId);
        localStorage.setItem('sbs_order_history', JSON.stringify(history));
        trackOrders();
    }

    function trackOrders() {
        let history = JSON.parse(localStorage.getItem('sbs_order_history')) || [];
        const legacyOrder = localStorage.getItem('myActiveOrder');
        if(legacyOrder && !history.includes(legacyOrder)) history.push(legacyOrder);

        const trackerUI = document.getElementById('status-tracker');
        const trackerSummary = document.getElementById('tracker-summary');
        const historyContainer = document.getElementById('history-container');
        
        if (history.length === 0) {
            trackerUI.style.display = 'none';
            return;
        }

        trackerUI.style.display = 'block';
        historyContainer.innerHTML = ''; 

        let activeCount = 0;

        history.forEach(orderId => {
            db.ref('orders/' + orderId).on('value', (snapshot) => {
                const data = snapshot.val();
                if(data) {
                    let statusText = 'MENUNGGU';
                    let color = '#888';

                    if(data.status === 'new') { statusText = 'MENUNGGU KONFIRMASI'; color = '#888'; activeCount++; }
                    else if(data.status === 'qris_unpaid') { statusText = 'MENUNGGU SCAN CUSTOMER'; color = '#FF6600'; activeCount++; }
                    else if(data.status === 'pending_payment') { statusText = 'MENUNGGU VERIFIKASI KASIR'; color = '#e67e22'; activeCount++; }
                    else if(data.status === 'unpaid') { statusText = 'DITERIMA / BELUM LUNAS'; color = '#FF6600'; activeCount++; }
                    else if(data.status === 'processing') { statusText = 'SEDANG DISIAPKAN'; color = '#3498db'; activeCount++; }
                    else if(data.status === 'completed') { statusText = 'SELESAI / DIANTAR'; color = '#2ecc71'; }
                    else if(data.status === 'rejected') { statusText = 'DITOLAK / KOSONG'; color = 'red'; }

                    let card = document.getElementById('card-' + orderId);
                    if(!card) {
                        card = document.createElement('div');
                        card.id = 'card-' + orderId;
                        card.className = 'history-card';
                        historyContainer.appendChild(card);
                    }

                    const itemNames = (data.items || []).map(i => i.name).join(', ');
                    card.innerHTML = `
                        <div class="history-header">
                            <span>Meja: ${data.tableNumber || '-'}</span>
                            <span>${data.paymentMethod === 'qris' ? 'QRIS' : 'TUNAI'}</span>
                        </div>
                        <div class="history-status" style="color:${color}">${statusText}</div>
                        <div class="history-items">${itemNames}</div>
                        <div style="font-size:10px; color:#aaa; margin-top:5px;">ID: ...${orderId.slice(-4)}</div>
                    `;
                    
                    if (activeCount > 0) {
                        trackerSummary.innerText = activeCount + " PESANAN AKTIF";
                        trackerUI.style.background = "#1A1A1A"; 
                    } else {
                        trackerSummary.innerText = "RIWAYAT PESANAN";
                        trackerUI.style.background = "#2ecc71"; 
                    }
                }
            });
        });
    }

    function openHistory() { document.getElementById('history-modal').style.display = 'flex'; }
    function closeHistory() { document.getElementById('history-modal').style.display = 'none'; }

    trackOrders();

    // --- TAB & SWIPE LOGIC ---
    function openT(e, n) {
        const searchInput = document.getElementById('menuSearch');
        if(searchInput && searchInput.value !== '') { clearSearchInput(); }
        var i, c, t;
        c = document.getElementsByClassName("content");
        for (i = 0; i < c.length; i++) c[i].classList.remove("active");
        t = document.getElementsByClassName("tab-btn");
        for (i = 0; i < t.length; i++) t[i].classList.remove("active");
        document.getElementById(n).classList.add("active");
        if(e && e.currentTarget) {
            e.currentTarget.classList.add("active");
            e.currentTarget.scrollIntoView({behavior: 'smooth', inline: 'center', block: 'nearest'});
        }
    }

    const swipeArea = document.getElementById('swipe-area');
    let startX = 0; let startY = 0; let endX = 0; let endY = 0;
    const minSwipeDistance = 70; 

    swipeArea.addEventListener('touchstart', (e) => {
        if(document.body.classList.contains('search-mode-active')) return;
        startX = e.changedTouches[0].screenX;
        startY = e.changedTouches[0].screenY; 
    }, {passive: true});

    swipeArea.addEventListener('touchend', (e) => {
        if(document.body.classList.contains('search-mode-active')) return;
        endX = e.changedTouches[0].screenX;
        endY = e.changedTouches[0].screenY; 
        handleSwipeGesture();
    }, {passive: true});

    function handleSwipeGesture() {
        const distanceX = endX - startX;
        const distanceY = endY - startY;
        if (Math.abs(distanceX) > minSwipeDistance && Math.abs(distanceX) > Math.abs(distanceY)) {
            const tabs = Array.from(document.querySelectorAll('.tab-btn'));
            const activeTab = document.querySelector('.tab-btn.active');
            const currentIndex = tabs.indexOf(activeTab);
            if (distanceX < 0) { if (currentIndex < tabs.length - 1) tabs[currentIndex + 1].click(); } 
            else { if (currentIndex > 0) tabs[currentIndex - 1].click(); }
        }
    }

    const searchInput = document.getElementById('menuSearch');
    const clearBtn = document.getElementById('clearSearch');
    const menuTabs = document.getElementById('menuTabs');
    const noResults = document.getElementById('no-results');
    const categoryMap = { 'kopi': ['black', 'white'], 'coffee': ['black', 'white'], 'alkohol': ['alcs'], 'beer': ['alcs'] };

    if(searchInput) {
        searchInput.addEventListener('keyup', (e) => {
            const term = e.target.value.toLowerCase().trim();
            clearBtn.style.display = term.length > 0 ? 'flex' : 'none';
            if (term.length === 0) { exitSearchMode(); return; }
            enterSearchMode();
            if (categoryMap[term]) { showFullCategories(categoryMap[term]); } else { filterSpecificItems(term); }
        });
    }

    function enterSearchMode() { document.body.classList.add('search-mode-active'); menuTabs.classList.add('hidden-by-search'); }
    function exitSearchMode() {
        document.body.classList.remove('search-mode-active'); menuTabs.classList.remove('hidden-by-search');
        document.querySelectorAll('.menu-card, .alcs-card').forEach(card => card.classList.remove('card-hidden'));
        document.querySelectorAll('.content').forEach(section => section.classList.remove('section-hidden'));
        noResults.style.display = 'none';
        const activeBtn = document.querySelector('.tab-btn.active');
        if(activeBtn) { const tabName = activeBtn.getAttribute('onclick').match(/'([^']+)'/)[1]; var c = document.getElementsByClassName("content"); for (var i = 0; i < c.length; i++) c[i].classList.remove("active"); document.getElementById(tabName).classList.add("active"); }
    }
    function clearSearchInput() { if(searchInput) searchInput.value = ''; if(clearBtn) clearBtn.style.display = 'none'; exitSearchMode(); }
    function showFullCategories(targetIds) { let hasResult = false; document.querySelectorAll('.content').forEach(section => { if (targetIds.includes(section.id)) { section.classList.remove('section-hidden'); section.querySelectorAll('.menu-card, .alcs-card').forEach(c => c.classList.remove('card-hidden')); hasResult = true; } else { section.classList.add('section-hidden'); } }); noResults.style.display = hasResult ? 'none' : 'block'; }
    function filterSpecificItems(term) { let hasResult = false; document.querySelectorAll('.content').forEach(section => { let visibleCardsCount = 0; const cards = section.querySelectorAll('.menu-card, .alcs-card'); cards.forEach(card => { const textContent = card.innerText.toLowerCase(); const imgAlt = card.querySelector('img') ? card.querySelector('img').alt.toLowerCase() : ''; const tags = card.getAttribute('data-tags') ? card.getAttribute('data-tags').toLowerCase() : ''; if (textContent.includes(term) || imgAlt.includes(term) || tags.includes(term)) { card.classList.remove('card-hidden'); visibleCardsCount++; hasResult = true; } else { card.classList.add('card-hidden'); } }); if (visibleCardsCount > 0) { section.classList.remove('section-hidden'); } else { section.classList.add('section-hidden'); } }); noResults.style.display = hasResult ? 'none' : 'block'; }
</script>
</body>
</html>
